<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Verification Required üíò</title>
  <style>
    :root{
      --bg:#0b0b10; --stroke:rgba(255,255,255,.14);
      --text:rgba(255,255,255,.92); --muted:rgba(255,255,255,.68);
      --yes1:#ff3ea5; --yes2:#ffcc70;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(255,62,165,.25), transparent 60%),
        radial-gradient(900px 600px at 80% 30%, rgba(255,204,112,.18), transparent 55%),
        var(--bg);
      overflow-x:hidden;
    }
    .wrap{max-width:980px;margin:0 auto;padding:18px}
    .screen{display:none;min-height:100vh;align-items:center}
    .screen.active{display:flex}
    .card{
      width:100%; border-radius:24px; padding:18px; position:relative; overflow:hidden;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
      box-shadow:0 20px 60px rgba(0,0,0,.45);
    }
    h1{margin:6px 0 6px;font-size:28px}
    p{margin:0 0 14px;color:var(--muted);line-height:1.4}
    .badge{
      display:inline-flex;gap:8px;align-items:center;
      padding:8px 12px;border-radius:999px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      font-size:13px;margin-bottom:10px;
    }
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
    .tile{
      position:relative; border-radius:16px; overflow:hidden;
      aspect-ratio:1/1; cursor:pointer;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      transition:transform .12s ease, border-color .12s ease, box-shadow .12s ease;
    }
    .tile:hover{transform:scale(1.01)}
    .tile img{width:100%;height:100%;object-fit:cover;display:block}
    .tile.selected{
      border-color: rgba(255, 62, 165, .75);
      box-shadow:0 0 0 3px rgba(255,62,165,.25) inset;
    }
    .check{
      position:absolute;top:10px;right:10px;width:28px;height:28px;border-radius:50%;
      display:grid;place-items:center;font-weight:900;
      background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.2);
      opacity:0;transform:scale(.9);transition:.12s ease;
    }
    .tile.selected .check{opacity:1;transform:scale(1)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:14px}
    button{
      border:0; cursor:pointer; border-radius:16px; padding:12px 16px; font-weight:800;
      color:rgba(255,255,255,.92);
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      transition:transform .12s ease, opacity .12s ease;
    }
    button:disabled{opacity:.45;cursor:not-allowed}
    button:hover:not(:disabled){transform:translateY(-1px)}
    .primary{
      background:linear-gradient(90deg, rgba(255,62,165,.95), rgba(255,204,112,.9));
      color:#1a0b14;border:0;
    }
    .msg{margin-left:auto;color:var(--muted);font-size:14px;min-height:18px}

    /* Valentine screen */
    .center{display:flex;align-items:center;justify-content:center}
    /* Full-bleed collage mosaic (no empty space) */
.collage{
  position:absolute;
  inset:0;
  opacity:.45;
  pointer-events:none;
  filter:saturate(1.05) contrast(1.03);

  display:grid;
  gap:0;
  grid-auto-flow:dense;
}

.collage .shot{
  position:relative;
  overflow:hidden;
}

.collage .shot img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;

  /* collage vibe without gaps */
  transform: rotate(var(--rot)) scale(var(--scale));
  transform-origin:center;
}

    .overlay{
      position:relative;padding:22px;border-radius:22px;
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.14);
      backdrop-filter:blur(8px);
    }
    .valTitle{font-size:34px;margin:0 0 10px}
    .valSub{margin:0 0 18px;color:rgba(255,255,255,.74)}
    .choiceRow{display:flex;gap:12px;flex-wrap:wrap}
    .yesBtn{
      background:linear-gradient(90deg, var(--yes1), var(--yes2));
      color:#1a0b14;border:0;padding:14px 20px;font-size:16px;
      box-shadow:0 14px 40px rgba(255,62,165,.20);
    }
    .noBtn{
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.55);
      border:1px dashed rgba(255,255,255,.18);
      padding:10px 14px;font-weight:700;filter:grayscale(1);opacity:.75;
    }
    .final{margin-top:14px;font-size:18px;font-weight:800;min-height:24px}

    /* particles */
    .particle{
      position:fixed;left:0;top:0;width:14px;height:14px;pointer-events:none;
      transform:translate(-50%,-50%);
      animation:floatUp 1200ms ease-out forwards;opacity:.95;
    }
    @keyframes floatUp{
      0%{transform:translate(-50%,-50%) scale(1);opacity:.95}
      100%{transform:translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(.9);opacity:0}
    }
    @media (max-width:640px){
      h1{font-size:24px}
      .valTitle{font-size:28px}
    }

    /* Full-screen celebration FX */
#fxCanvas{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  z-index:9999;
  pointer-events:none;
  display:none;
}

/* Make the whole page feel like ‚ÄúEVENT MODE‚Äù */
body.celebrate{
  animation: bgPulse 1.2s ease-in-out infinite alternate;
}

@keyframes bgPulse{
  from { filter: saturate(1.05) brightness(1.00); }
  to   { filter: saturate(1.35) brightness(1.10); }
}

.overlay.celebrateGlow{
  box-shadow: 0 0 0 1px rgba(255,255,255,.18), 0 0 60px rgba(255,62,165,.25);
}

  </style>
</head>
<body>
  <div class="wrap">

    <section id="screenCaptcha" class="screen active">
      <div class="card">
        <div class="badge">üîí Totally Legit Verification</div>
        <h1>Identity Verification Required</h1>
        <p id="captchaPrompt">
          To confirm your identity, select all images of the <b>handsomest, smartest, funniest</b> guy you know.
        </p>

        <div id="grid" class="grid"></div>

        <div class="row">
          <button id="verifyBtn" class="primary" disabled>Verify ‚úÖ</button>
          <button id="resetBtn">Reset</button>
          <div id="captchaMsg" class="msg"></div>
        </div>
      </div>
    </section>

    <section id="screenVal" class="screen">
      <div class="card center" style="min-height:70vh">
        <div id="collage" class="collage" aria-hidden="true"></div>
        <div class="overlay">
          <h2 class="valTitle">Will you be my Valentine? üíò</h2>
          <p class="valSub">No pressure‚Ä¶ but also yes pressure üòå</p>
          <div class="choiceRow">
            <button id="yesBtn" class="yesBtn">YES!! üíñ</button>
            <button id="noBtn" class="noBtn">No üò∂</button>
          </div>
          <div id="finalMsg" class="final"></div>
        </div>
      </div>
    </section>

  </div>

  <canvas id="fxCanvas"></canvas>
  <script>
    /**************
     * Put your image URLs here
     * (For now these are placeholders. Replace with your own.)
     **************/
    const captchaImages = [
  "img/IMG_0279.jpg",
  "img/IMG_0281.jpg",
  "img/IMG_0282.jpg",
  "img/IMG_0283.jpg",
  "img/IMG_0284.jpg",
  "img/IMG_0285.jpg",
  "img/IMG_0286.jpg",
  "img/Single.jpg",
  "img/IMG_0287.jpg"
    ];

    const coupleImages = [
  "img/Couple1.jpg",
  "img/Couple2.jpg",
  "img/Couple3.jpg",
  "img/Couple4.jpg",
  "img/Couple5.jpg",
  "img/Couple6.jpg",
  "img/Couple7.jpg",
  "img/Couple8.jpg",
  "img/Couple9.jpg",
  "img/Couple10.jpg",
  "img/Couple11.jpg",
  "img/Couple12.jpg",
  "img/Couple13.jpg",
  "img/Couple14.jpg",
  "img/Couple15.jpg",
  "img/Couple16.jpg"
    ];

    const REQUIRED_SELECTIONS = 9;

    const screenCaptcha = document.getElementById("screenCaptcha");
    const screenVal = document.getElementById("screenVal");
    const grid = document.getElementById("grid");
    const verifyBtn = document.getElementById("verifyBtn");
    const resetBtn = document.getElementById("resetBtn");
    const captchaMsg = document.getElementById("captchaMsg");
    const collage = document.getElementById("collage");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const finalMsg = document.getElementById("finalMsg");

    const selected = new Set();
    let noCount = 0;

    function shuffle(arr){
      const a = [...arr];
      for (let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    function renderCaptcha(){
      grid.innerHTML = "";
      selected.clear();
      captchaMsg.textContent = "";
      verifyBtn.disabled = true;

      const imgs = shuffle(captchaImages);
      imgs.forEach((src, idx) => {
        const tile = document.createElement("button");
        tile.className = "tile";
        tile.type = "button";

        tile.innerHTML = `
          <img src="${src}" alt="verification image ${idx+1}" />
          <div class="check">‚úì</div>
        `;

        tile.addEventListener("click", () => {
          if (selected.has(idx)) {
            selected.delete(idx);
            tile.classList.remove("selected");
          } else {
            selected.add(idx);
            tile.classList.add("selected");
          }
          verifyBtn.disabled = (selected.size === 0);
        });

        grid.appendChild(tile);
      });
    }

    function buildCollage(){
  collage.innerHTML = "";

  const rect = collage.getBoundingClientRect();
  const W = rect.width;
  const H = rect.height;

  // Base tile size (smaller = more tiles)
  const base = Math.max(110, Math.min(180, Math.floor(W / 4)));

  // Choose grid dimensions
  const cols = Math.max(3, Math.floor(W / base));
  const rows = Math.max(3, Math.ceil(H / base));

  collage.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
  collage.style.gridAutoRows = `${Math.floor(H / rows)}px`;

  // Fill enough tiles to cover the grid (a little extra helps "dense" packing)
  const needed = Math.ceil(cols * rows * 1.25);

  const pics = shuffle(coupleImages);
  for (let i = 0; i < needed; i++){
    const src = pics[i % pics.length];

    const tile = document.createElement("div");
    tile.className = "shot";

    // Some tiles span bigger to create a mosaic feel
    const spanX = Math.random() < 0.18 ? 2 : 1;
    const spanY = Math.random() < 0.18 ? 2 : 1;
    tile.style.gridColumn = `span ${spanX}`;
    tile.style.gridRow = `span ${spanY}`;

    const img = document.createElement("img");
    img.src = src;
    img.alt = "";

    // Rotate + scale so corners never reveal background
    img.style.setProperty("--rot", `${(Math.random() * 14 - 7).toFixed(1)}deg`);
    img.style.setProperty("--scale", (1.18 + Math.random() * 0.22).toFixed(2));

    tile.appendChild(img);
    collage.appendChild(tile);
  }
}

    function popParticles(x, y, count=40){
      const shapes = ["üíñ","üíò","üíù","üéà","‚ú®","üéâ","‚ù§Ô∏è"];
      for (let i=0;i<count;i++){
        const p = document.createElement("div");
        p.className = "particle";
        p.textContent = shapes[Math.floor(Math.random()*shapes.length)];
        p.style.left = x + "px";
        p.style.top  = y + "px";
        const dx = (Math.random()*260 - 130).toFixed(0) + "px";
        const dy = (Math.random()*-320 - 80).toFixed(0) + "px";
        p.style.setProperty("--dx", dx);
        p.style.setProperty("--dy", dy);
        document.body.appendChild(p);
        setTimeout(() => p.remove(), 1300);
      }
    }

    verifyBtn.addEventListener("click", () => {
      if (selected.size === REQUIRED_SELECTIONS) {
        captchaMsg.textContent = "‚úÖ Verified. (I knew it.)";
        setTimeout(() => {
          screenCaptcha.classList.remove("active");
          screenVal.classList.add("active");
          buildCollage();
        }, 600);
      } else {
        captchaMsg.textContent = `Hmm‚Ä¶ not quite üòè (Selected ${selected.size}/${REQUIRED_SELECTIONS})`;
      }
    });

    resetBtn.addEventListener("click", renderCaptcha);

   yesBtn.addEventListener("click", () => {
  finalMsg.textContent = "YAYYYYY üíû You just made my whole day!!";
  startCelebration();

  const r = yesBtn.getBoundingClientRect();
  // extra initial burst right at the button location:
  popParticles(r.left + r.width/2, r.top + r.height/2, 120);
});



    noBtn.addEventListener("click", () => {
      noCount++;
      const messages = [
        "Wait‚Ä¶ what? üò≥",
        "Try again üòå",
        "I don't back.",
        "Oh come on ü•∫",
        "Nope, you have no choice"
      ];
      finalMsg.textContent = messages[Math.min(noCount-1, messages.length-1)];

      const dx = (Math.random()*180 - 90);
      const dy = (Math.random()*120 - 60);
      noBtn.style.transform = `translate(${dx}px, ${dy}px)`;
      setTimeout(() => (noBtn.style.transform = ""), 450);

      const r = noBtn.getBoundingClientRect();
      popParticles(r.left + r.width/2, r.top + r.height/2, 18);
    });

    window.addEventListener("resize", () => {
      if (screenVal.classList.contains("active")) buildCollage();
    });

    renderCaptcha();
    // ======= FULLSCREEN CELEBRATION FX (fireworks + hearts) =======
const fxCanvas = document.getElementById("fxCanvas");
const fxCtx = fxCanvas.getContext("2d");

let fxRunning = false;
let rockets = [];
let sparks = [];
let hearts = [];
let burstTimer = null;

function resizeFx(){
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  fxCanvas.width = Math.floor(window.innerWidth * dpr);
  fxCanvas.height = Math.floor(window.innerHeight * dpr);
  fxCanvas.style.width = window.innerWidth + "px";
  fxCanvas.style.height = window.innerHeight + "px";
  fxCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
}
window.addEventListener("resize", resizeFx);

function rand(min, max){ return Math.random() * (max - min) + min; }
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

const heartChars = ["üíñ","üíò","üíù","‚ù§Ô∏è","‚ú®","üéâ","üéà"];
const fireColors = [
  "rgba(255,62,165,",
  "rgba(255,204,112,",
  "rgba(120,220,255,",
  "rgba(170,255,140,",
  "rgba(255,120,120,"
];

// Rocket that flies up then explodes
function launchRocket(){
  const W = window.innerWidth;
  const H = window.innerHeight;

  rockets.push({
    x: rand(W * 0.15, W * 0.85),
    y: H + 10,
    vx: rand(-0.6, 0.6),
    vy: rand(-10, -13),
    targetY: rand(H * 0.15, H * 0.45),
    color: pick(fireColors),
    life: 0
  });
}

function explode(x, y){
  const base = pick(fireColors);
  const count = Math.floor(rand(70, 120));

  for (let i=0; i<count; i++){
    const a = rand(0, Math.PI * 2);
    const s = rand(2, 7);
    sparks.push({
      x, y,
      vx: Math.cos(a) * s,
      vy: Math.sin(a) * s,
      g: 0.12,
      drag: 0.985,
      alpha: 1,
      decay: rand(0.010, 0.018),
      radius: rand(1.2, 2.4),
      color: base
    });
  }

  // Extra heart burst
  for (let i=0; i<18; i++){
    hearts.push({
      x, y,
      vx: rand(-3.5, 3.5),
      vy: rand(-6.5, -2.0),
      rot: rand(-0.5, 0.5),
      vr: rand(-0.03, 0.03),
      size: rand(16, 30),
      alpha: 1,
      decay: rand(0.010, 0.018),
      ch: pick(heartChars)
    });
  }
}

// Continuous heart rain
function spawnHeartRain(){
  const W = window.innerWidth;
  hearts.push({
    x: rand(0, W),
    y: -20,
    vx: rand(-0.7, 0.7),
    vy: rand(1.6, 3.6),
    rot: rand(-0.8, 0.8),
    vr: rand(-0.02, 0.02),
    size: rand(18, 34),
    alpha: 1,
    decay: rand(0.002, 0.005),
    ch: pick(heartChars)
  });
}

function fxLoop(){
  if (!fxRunning) return;

  const W = window.innerWidth;
  const H = window.innerHeight;

  // Fade the canvas slightly each frame for trails
  fxCtx.fillStyle = "rgba(0,0,0,0.18)";
  fxCtx.fillRect(0, 0, W, H);

  // Rockets
  for (let i=rockets.length-1; i>=0; i--){
    const r = rockets[i];
    r.life++;

    r.x += r.vx;
    r.y += r.vy;
    r.vy += 0.08; // gravity slows ascent

    // draw rocket trail
    fxCtx.beginPath();
    fxCtx.arc(r.x, r.y, 2.2, 0, Math.PI*2);
    fxCtx.fillStyle = r.color + "1)";
    fxCtx.fill();

    // explode at target
    if (r.y <= r.targetY || r.vy >= -1){
      explode(r.x, r.y);
      rockets.splice(i, 1);
    }
  }

  // Sparks (firework particles)
  for (let i=sparks.length-1; i>=0; i--){
    const p = sparks[i];
    p.vx *= p.drag;
    p.vy *= p.drag;
    p.vy += p.g;

    p.x += p.vx;
    p.y += p.vy;

    p.alpha -= p.decay;

    if (p.alpha <= 0){
      sparks.splice(i, 1);
      continue;
    }

    fxCtx.beginPath();
    fxCtx.arc(p.x, p.y, p.radius, 0, Math.PI*2);
    fxCtx.fillStyle = p.color + p.alpha + ")";
    fxCtx.fill();
  }

  // Hearts (burst + rain)
  // add a few per frame for ‚ÄúWOW‚Äù
  for (let k=0; k<3; k++) spawnHeartRain();

  for (let i=hearts.length-1; i>=0; i--){
    const h = hearts[i];
    h.x += h.vx;
    h.y += h.vy;
    h.rot += h.vr;
    h.alpha -= h.decay;

    if (h.alpha <= 0 || h.y > H + 40){
      hearts.splice(i, 1);
      continue;
    }

    fxCtx.save();
    fxCtx.globalAlpha = Math.max(0, h.alpha);
    fxCtx.translate(h.x, h.y);
    fxCtx.rotate(h.rot);
    fxCtx.font = `${h.size}px system-ui, Apple Color Emoji, Segoe UI Emoji`;
    fxCtx.fillText(h.ch, -h.size/2, h.size/2);
    fxCtx.restore();
  }

  requestAnimationFrame(fxLoop);
}

function startCelebration(){
  // Show canvas + start loop
  resizeFx();
  fxCanvas.style.display = "block";
  fxRunning = true;

  // Make the whole page feel alive
  document.body.classList.add("celebrate");
  document.querySelector(".overlay")?.classList.add("celebrateGlow");

  // Kick off big opening barrage
  for (let i=0; i<6; i++) setTimeout(launchRocket, i * 140);

  // Keep launching fireworks periodically
  burstTimer = setInterval(() => {
    launchRocket();
    if (Math.random() < 0.55) launchRocket();
  }, 420);

  // Start render
  fxCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
  requestAnimationFrame(fxLoop);

  // Optional: auto-stop after 14 seconds (comment out if you want it nonstop)
  setTimeout(stopCelebration, 14000);
}

function stopCelebration(){
  fxRunning = false;
  if (burstTimer) clearInterval(burstTimer);
  burstTimer = null;

  // Let remaining trails fade for a moment, then hide
  setTimeout(() => {
    fxCanvas.style.display = "none";
    fxCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
  }, 800);

  document.body.classList.remove("celebrate");
  document.querySelector(".overlay")?.classList.remove("celebrateGlow");

  rockets = [];
  sparks = [];
  hearts = [];
}

  </script>
</body>
</html>
